å¥½çš„ï¼Œå½“ç„¶å¯ä»¥ã€‚æˆ‘å°†ä½ å…³äº **Linux æœåŠ¡å™¨ç®¡ç†ã€Web æœåŠ¡éƒ¨ç½²ã€HTTPS é…ç½®**ç­‰ä¸€ç³»åˆ—é—®é¢˜è¿›è¡Œäº†ç³»ç»Ÿçš„æ¢³ç†å’Œæ±‡æ€»ï¼Œå½¢æˆäº†ä¸€ä»½å®Œæ•´çš„æŒ‡å—ã€‚

---

# ğŸš€ Linux æœåŠ¡å™¨è¿ç»´ä¸Webéƒ¨ç½²ç»ˆææŒ‡å—

## ç›®å½•
1.  [ç³»ç»ŸçŠ¶æ€ä¸ç½‘ç»œæœåŠ¡æŸ¥çœ‹](#1-ç³»ç»ŸçŠ¶æ€ä¸ç½‘ç»œæœåŠ¡æŸ¥çœ‹)
2.  [å®å¡”é¢æ¿æ•…éšœæ’æŸ¥](#2-å®å¡”é¢æ¿æ•…éšœæ’æŸ¥)
3.  [WebæœåŠ¡ï¼ˆNginxï¼‰æ·±åº¦è§£æ](#3-webæœåŠ¡nginxæ·±åº¦è§£æ)
4.  [è¿›ç¨‹åå°è¿è¡Œä¸ç®¡ç†](#4-è¿›ç¨‹åå°è¿è¡Œä¸ç®¡ç†)
5.  [æ–‡ä»¶æ“ä½œä¸ä¼ è¾“](#5-æ–‡ä»¶æ“ä½œä¸ä¼ è¾“)
6.  [HTTPS é…ç½®å…¨æ”»ç•¥](#6-https-é…ç½®å…¨æ”»ç•¥)
7.  [æ ¸å¿ƒæ¦‚å¿µè§£æ](#7-æ ¸å¿ƒæ¦‚å¿µè§£æ)

---

## 1. ç³»ç»ŸçŠ¶æ€ä¸ç½‘ç»œæœåŠ¡æŸ¥çœ‹

### æŸ¥çœ‹åå°æœåŠ¡
```bash
# æŸ¥çœ‹æ‰€æœ‰å·²å¯åŠ¨çš„systemdæœåŠ¡
systemctl list-units --type=service --state=running

# æŸ¥çœ‹æ‰€æœ‰å¼€æœºè‡ªå¯çš„æœåŠ¡
systemctl list-unit-files --state=enabled
```

### æŸ¥çœ‹å¯¹å¤–æä¾›ç½‘ç»œæœåŠ¡çš„è¿›ç¨‹
```bash
# æŸ¥çœ‹æ‰€æœ‰ç›‘å¬ç«¯å£çš„è¿›ç¨‹ (æ¨èä½¿ç”¨)
sudo ss -tulnp
# ä¼ ç»Ÿå‘½ä»¤
sudo netstat -tulnp
# æŸ¥çœ‹æ­£åœ¨ç›‘å¬çš„ç¨‹åº
sudo lsof -i -P -n | grep LISTEN
```
**å…³é”®æŒ‡æ ‡**ï¼š`Local Address:Port` (å¦‚ `0.0.0.0:80`)ã€`Process`ã€‚

---

## 2. å®å¡”é¢æ¿æ•…éšœæ’æŸ¥

### æ‰¾å›è®¿é—®ä¿¡æ¯
```bash
# è·å–é¢æ¿åœ°å€ã€å®‰å…¨å…¥å£ã€ç”¨æˆ·åå’Œå¯†ç 
sudo /etc/init.d/bt default
# æˆ–ç›´æ¥æŸ¥æ‰¾å®‰å…¨å…¥å£
sudo cat /www/server/panel/data/admin_path.pl
```
è®¿é—®åœ°å€æ ¼å¼ï¼š`https://ä½ çš„æœåŠ¡å™¨IP:ç«¯å£/å®‰å…¨å…¥å£`

### æœåŠ¡ç®¡ç†
```bash
# å¯åŠ¨/é‡å¯/æŸ¥çœ‹çŠ¶æ€
sudo systemctl start bt
sudo systemctl restart bt
sudo systemctl status bt
```

---

## 3. WebæœåŠ¡ï¼ˆNginxï¼‰æ·±åº¦è§£æ

### Nginx é…ç½®ä½“ç³»
*   **ä¸»é…ç½®**ï¼š`/etc/nginx/nginx.conf` (æˆ– `/www/server/nginx/conf/nginx.conf`)
    *   å®šä¹‰å…¨å±€å‚æ•°ã€‚
    *   é€šè¿‡ `include` æŒ‡ä»¤åŠ è½½å­é…ç½®ã€‚
*   **å­é…ç½®**ï¼š`/www/server/panel/vhost/nginx/*.conf`
    *   æ¯ä¸ªç½‘ç«™ï¼ˆåŒ…æ‹¬å®å¡”é¢æ¿ã€PHPMyAdminã€ä½ çš„é¡¹ç›®ï¼‰ä¸€ä¸ªæ–‡ä»¶ã€‚
    *   **ä¿®æ”¹ç½‘ç«™é…ç½®åº”åœ¨æ­¤å¤„è¿›è¡Œ**ï¼Œè€Œä¸æ˜¯ä¸»é…ç½®ã€‚

### è¯Šæ–­å‘½ä»¤
```bash
# æ£€æŸ¥NginxçŠ¶æ€
systemctl status nginx
# æµ‹è¯•é…ç½®æ–‡ä»¶è¯­æ³•
nginx -t
# é‡æ–°åŠ è½½é…ç½®ï¼ˆæ— éœ€é‡å¯ï¼‰
nginx -s reload
# æˆ–
systemctl reload nginx
# æŸ¥çœ‹ç«¯å£ç›‘å¬æƒ…å†µ
ss -tulnp | grep :80
```

### è§£å†³ 404/502 é”™è¯¯
*   **404**ï¼šè·¯å¾„é”™è¯¯ï¼Œé€šå¸¸æ„å‘³ç€Nginxæ”¶åˆ°äº†è¯·æ±‚ä½†æ‰¾ä¸åˆ°å¯¹åº”èµ„æºã€‚æ£€æŸ¥ `root` å’Œ `index` æŒ‡ä»¤ã€‚
*   **502 Bad Gateway**ï¼šNginxæ— æ³•è¿æ¥åˆ°åç«¯æœåŠ¡ï¼ˆå¦‚PHP-FPMã€Node.jsï¼‰ã€‚æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦è¿è¡Œã€ç«¯å£æ˜¯å¦æ­£ç¡®ã€‚

---

## 4. è¿›ç¨‹åå°è¿è¡Œä¸ç®¡ç†

### ä½¿ç”¨ PM2 (Node.js åº”ç”¨é¦–é€‰)
```bash
# å®‰è£…
npm install pm2 -g

# å¯åŠ¨å¹¶ç®¡ç†åº”ç”¨
pm2 start app.js --name "my-app"   # å¯åŠ¨æ™®é€šNodeåº”ç”¨
pm2 start npm --name "my-hexo" -- run start # å¯åŠ¨Hexoç­‰npmé¡¹ç›®

# å¸¸ç”¨å‘½ä»¤
pm2 list                           # æŸ¥çœ‹åˆ—è¡¨
pm2 logs my-app                    # æŸ¥çœ‹æ—¥å¿—
pm2 restart my-app                 # é‡å¯
pm2 delete my-app                  # åˆ é™¤
pm2 startup                       # è®¾ç½®å¼€æœºè‡ªå¯
pm2 save                          # ä¿å­˜å½“å‰åˆ—è¡¨

# ç”¨é…ç½®æ–‡ä»¶å¯åŠ¨ (ecosystem.config.js)
pm2 start ecosystem.config.js
```

### å…¶ä»–æ–¹æ³•
```bash
# 1. ä½¿ç”¨nohup (ç®€å•)
nohup node app.js > app.log 2>&1 &

# 2. ä½¿ç”¨tmux/screen (å¯äº¤äº’)
tmux new -s my-session
# åœ¨tmuxä¸­å¯åŠ¨è¿›ç¨‹åï¼ŒæŒ‰ Ctrl+B, D åˆ†ç¦»ä¼šè¯
tmux attach -t my-session # é‡æ–°è¿æ¥
```

---

## 5. æ–‡ä»¶æ“ä½œä¸ä¼ è¾“

### å‹ç¼©ä¸è§£å‹
```bash
# å‹ç¼©æ–‡ä»¶å¤¹
zip -r archive_name.zip folder_to_compress/

# è§£å‹zipæ–‡ä»¶
unzip archive_name.zip
# è§£å‹åˆ°æŒ‡å®šç›®å½•
unzip archive_name.zip -d /target/path
```

### è·¨æœåŠ¡å™¨ä¼ è¾“ (scp)
```bash
# ä»æœ¬åœ°å¤åˆ¶åˆ°è¿œç¨‹
scp -P 22 /local/file.txt user@remote_ip:/remote/path/

# ä»è¿œç¨‹å¤åˆ¶åˆ°æœ¬åœ°
scp user@remote_ip:/remote/file.txt /local/path/

# é€’å½’å¤åˆ¶æ•´ä¸ªç›®å½•
scp -r /local/folder/ user@remote_ip:/remote/path/
```

---

## 6. HTTPS é…ç½®å…¨æ”»ç•¥

### ä½¿ç”¨ Certbot è·å–å…è´¹ SSL è¯ä¹¦
```bash
# 1. å®‰è£…Certbot (ä»¥Ubuntu/Nginxä¸ºä¾‹)
sudo apt update
sudo apt install certbot python3-certbot-nginx

# 2. è·å–è¯ä¹¦å¹¶è‡ªåŠ¨é…ç½®Nginx (æ¨è)
sudo certbot --nginx -d yourdomain.com -d www.yourdomain.com

# 3. æµ‹è¯•è‡ªåŠ¨ç»­ç­¾
sudo certbot renew --dry-run
```
**æµç¨‹**ï¼šå®‰è£… -> è¿è¡Œå‘½ä»¤ï¼ˆä¼šè‡ªåŠ¨ä¿®æ”¹Nginxé…ç½®ï¼‰-> æµ‹è¯•ç»­ç­¾ã€‚

### Nginx HTTPS æœåŠ¡å™¨å—é…ç½®ç¤ºä¾‹
```nginx
server {
    listen 443 ssl http2;
    server_name yourdomain.com;

    # è¯ä¹¦è·¯å¾„ï¼ˆCertbotä¼šè‡ªåŠ¨è®¾ç½®ï¼‰
    ssl_certificate /etc/letsencrypt/live/yourdomain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/yourdomain.com/privkey.pem;

    # ç½‘ç«™æ ¹ç›®å½•ï¼ˆHexoé¡¹ç›®ï¼‰
    root /www/wwwroot/yourdomain;
    index index.html;

    # é™æ€èµ„æºç¼“å­˜
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
        expires 30d;
        add_header Cache-Control "public, immutable";
    }
}

# HTTP å¼ºåˆ¶é‡å®šå‘åˆ° HTTPS
server {
    listen 80;
    server_name yourdomain.com;
    return 301 https://$server_name$request_uri;
}
```

---

## 7. æ ¸å¿ƒæ¦‚å¿µè§£æ

### Web æ¶æ„ä¸­çš„è§’è‰²
| ç»„ä»¶ | è§’è‰² | èŒè´£ |
| :--- | :--- | :--- |
| **Nginx/Apache** | **WebæœåŠ¡å™¨ / ç½‘å…³** | å¤„ç†HTTP/Sã€SSLã€é™æ€æ–‡ä»¶ã€åå‘ä»£ç†ã€è´Ÿè½½å‡è¡¡ |
| **Node.js** | **åº”ç”¨è¿è¡Œæ—¶** | æ‰§è¡ŒJavaScriptä»£ç ï¼Œå¤„ç†åŠ¨æ€é€»è¾‘ã€APIã€æ•°æ®åº“ |
| **Hexo** | **é™æ€ç«™ç‚¹ç”Ÿæˆå™¨** | **é¢„ç”Ÿæˆ**æ‰€æœ‰HTML/CSS/JSæ–‡ä»¶ï¼Œä¹‹åç”±WebæœåŠ¡å™¨æä¾› |

### ç«¯å£ä¸åè®®
*   **80ç«¯å£**ï¼šHTTPåè®®ï¼Œæ˜æ–‡ä¼ è¾“ã€‚
*   **443ç«¯å£**ï¼šHTTPSåè®®ï¼ŒåŠ å¯†ä¼ è¾“ã€‚**å¯ç”¨HTTPSå¿…é¡»ç›‘å¬æ­¤ç«¯å£**ã€‚
*   å·¥ä½œæµç¨‹ï¼šç”¨æˆ· <-> (HTTPS/443) Nginx <-> (HTTP/å†…ç½‘ç«¯å£) Node.jsåº”ç”¨ã€‚

### æ€»ç»“ï¼šä»é—®é¢˜åˆ°è§£å†³æ–¹æ¡ˆçš„æ˜ å°„

| ä½ é‡åˆ°çš„é—®é¢˜ | æ ¸å¿ƒå‘½ä»¤/è§£å†³æ–¹æ¡ˆ |
| :--- | :--- |
| ç½‘ç«™è®¿é—®ä¸äº† | 1. `systemctl status nginx` <br> 2. `nginx -t` <br> 3. `ss -tulnp` |
| å®å¡”é¢æ¿æ‰“ä¸å¼€ | 1. `sudo /etc/init.d/bt default` <br> 2. `sudo systemctl restart bt` |
| Node.jsè¿›ç¨‹å…³é—­SSHå°±æ–­ | 1. `pm2 start ...` <br> 2. `pm2 startup && pm2 save` |
| ç”³è¯·HTTPSè¯ä¹¦ | `sudo certbot --nginx -d yourdomain.com` |
| ä¼ è¾“æ–‡ä»¶/å¤‡ä»½ | `scp ...` / `zip -r ...` |
| æŸ¥çœ‹è°åœ¨è¿è¡Œ | `sudo ss -tulnp` |

è¿™ä»½æŒ‡å—å‡ ä¹æ¶µç›–äº†ä½ é‡åˆ°çš„æ‰€æœ‰åœºæ™¯ã€‚é‡åˆ°é—®é¢˜æ—¶ï¼Œå…ˆå®šä½é—®é¢˜ç±»å‹ï¼Œç„¶åæ‰¾åˆ°å¯¹åº”çš„ç« èŠ‚ä½¿ç”¨å‘½ä»¤è¿›è¡Œæ’æŸ¥å³å¯ã€‚